<ion-app>

    <ion-header>
        <ion-toolbar class="ion-header-bar">
            <ion-tab-button class="icon" tab="map">
            </ion-tab-button>
            <img class="img" src="https://uploaddeimagens.com.br/images/002/295/172/original/Tem-em-Casa-logo.png?1566846408">
        </ion-toolbar>
    </ion-header>

    <ion-content padding>
        <div *ngIf="!onEdit">
        <ion-searchbar cancelButtonIcon="cancel-button-icon" animated showCancelButton="never" [(ngModel)]="busca" name="busca" placeholder="Buscar mantimento">
            <ion-button (click)="buscarMantimento()">
                <ion-icon name="search"></ion-icon>
            </ion-button>
        </ion-searchbar>
        <ion-list >
            <ion-item>
                <label>Item</label>
                <label style="padding-left:25%">Quantidade</label>
                <label  style="padding-left:12%">Opções</label>
            </ion-item>
            <ion-item  *ngFor="let mantimento of listarMantimentos$ | async">
                <!-- <ion-avatar slot="start">
                    Importa fotos do banco
                    <img src="{{mantimento.foto}}"> 
                </ion-avatar> -->
                <ion-label>{{mantimento.nome}}</ion-label>
                <ion-label>{{mantimento.qtde}} - {{mantimento.um}}</ion-label>

                <ion-button title="Excluir" color="danger" (click)="excluir(mantimento.id)">
                    <ion-icon name="trash"></ion-icon>
                </ion-button>

                <ion-button title="Alterar" color="primary" (click)="editar(mantimento,mantimento.id)">
                    <ion-icon name="share-alt"></ion-icon>
                </ion-button>
            </ion-item>
        </ion-list>

        <ion-fab vertical="bottom" horizontal="end" slot="fixed">
            <ion-fab-button routerLink="/cadastrar-estoque" color="secondary">
                <ion-icon name="add"></ion-icon>
            </ion-fab-button>
        </ion-fab>
    </div>
    <div *ngIf="onEdit">
            <ion-card>
                    <ion-card-header>
                        <ion-card-title class="center">Alterar Mantimento</ion-card-title>
                    </ion-card-header>
                </ion-card>
        
                <ion-item>
                    <ion-label position="floating">Mantimento</ion-label>
                    <ion-input [(ngModel)]="alterarMantimento.nome" value="{{alterarMantimento.nome}}"></ion-input>
                </ion-item>
        
                <ion-item>
                    <ion-label>Data Validade</ion-label>
                    <ion-datetime [(ngModel)]="alterarMantimento.dataValidade" displayFormat="DD MMM YYYY" max="2050"  month-short-names="jan, fev, mar, abr, mar, jun, jul, ago, set, out, nov, dez" placeholder="Selecionar data" value="{{alterarMantimento.dataValidade}}">
                    </ion-datetime>
                </ion-item>
        
                <ion-item>
                    <ion-label>Unidade de Medida</ion-label>
                    <ion-select [(ngModel)]="alterarMantimento.um" value="{{alterarMantimento.um}}">
                        <ion-select-option value="g">Grama(s)</ion-select-option>
                        <ion-select-option value="L">Litro(s)</ion-select-option>
                        <ion-select-option value="UN">Unidade(s)</ion-select-option>
                        <ion-select-option value="Kg">Quilograma(s)</ion-select-option>
                    </ion-select>
                </ion-item>
        
                <ion-item>
                    <ion-label position="floating">Quantidade</ion-label>
                    <ion-input [(ngModel)]="alterarMantimento.qtde" value="{{alterarMantimento.qtde}}"></ion-input>
                </ion-item>
                <br>
                <button class="mt btn centro-btn" expand="full" color="secondary" (click)="alterarMantimentos()">Enviar</button>
    </div>
    </ion-content>
</ion-app>